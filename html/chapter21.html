<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <title>é™„å½• Bï¼šTool Schema Cookbook (å…¨åœºæ™¯å·¥å…·å®šä¹‰é€ŸæŸ¥)</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="index.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åŸºäºå¤šæ¨¡æ€ç†è§£ç”Ÿæˆæ¨¡å‹çš„æ™ºèƒ½ä½“æ„å»ºæ•™ç¨‹ï¼ˆç›®å½•ï¼‰</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter1.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 1 ç«  å¤šæ¨¡æ€æ™ºèƒ½ä½“æ¦‚è§ˆ (Chapter 1: Overview of Multimodal Agents)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter2.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 2 ç«  å¤šæ¨¡æ€è¾“å…¥è¾“å‡ºä¸ä¸Šä¸‹æ–‡ç®¡ç† (Multimodal I/O & Context)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter3.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 3 ç«  Tool Callï¼šå·¥å…·è°ƒç”¨è®¾è®¡ä¸ç¼–æ’</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter4.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 4 ç«  Agent Loopï¼šè§„åˆ’-æ‰§è¡Œ-åæ€çš„é—­ç¯</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter5.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 5 ç«  è®°å¿†ä¸çŸ¥è¯†ï¼šRAGã€å¤šæ¨¡æ€æ£€ç´¢ä¸çŠ¶æ€ç®¡ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter6.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 6 ç«  Agent Handoffï¼šä»»åŠ¡ç§»äº¤ä¸åä½œåè®®</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter7.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 7 ç«  OpenAI Harmony æ ¼å¼ä¸å¤šæ¨¡æ€æ¶ˆæ¯åè®®</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter8.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 8 ç«  Multi-Agentï¼šä»å•ä½“åˆ°ç¾¤ä½“åä½œ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter9.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 9 ç«  ä¸ä»¿çœŸç³»ç»Ÿäº’åŠ¨ï¼šé—­ç¯ã€é‡‡æ ·ä¸å®‰å…¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter10.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 10 ç«  Trace æ„é€ ã€è’¸é¦ä¸ Benchmark è¯„æµ‹ä½“ç³»</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter11.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 11 ç«  DeepResearch æ™ºèƒ½ä½“ï¼šå¤šæ¨¡æ€ç ”ç©¶ä¸é•¿æ–‡æ¡£ PDF</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter12.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 12 ç«  Coding Agentï¼šä»ä»“åº“ç†è§£åˆ°å¯åˆå¹¶ PR</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter13.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 13 ç«  è‡ªåŠ¨é©¾é©¶ VLA Agentï¼šä»æ„ŸçŸ¥åˆ°é—­ç¯å†³ç­–</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter14.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 14 ç«  åº§èˆ±å¤šæ¨¡å¯¹è¯æœºå™¨äººï¼šå¯æ§ã€å¯é ã€å¯è§£é‡Š</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter15.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 15 ç«  GeoGuessr / åœ°ç†å®šä½ Agentï¼šä»ä¸€å¼ å›¾åˆ°ä¸€ä¸ªä¸–ç•Œåæ ‡</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter16.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 16 ç«  æœºå™¨äººæ“ä½œä¸å…·èº« VLA Agent</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter17.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 17 ç«  æ–‡æ¡£/ç¥¨æ®/è¡¨æ ¼å¤šæ¨¡ RPA Agentï¼šä¼ä¸šæµç¨‹è‡ªåŠ¨åŒ–</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter18.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 18 ç«  ç”Ÿäº§çº§å·¥ç¨‹åŒ–ï¼šå¯è§‚æµ‹ã€å¯å›å½’ã€å¯è¿è¥ (Production-Grade Engineering)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter19.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬ 19 ç«  å®‰å…¨ã€å¯¹é½ä¸çº¢é˜Ÿï¼šæŠŠé£é™©å˜æˆå¯æµ‹è¯•é¡¹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter20.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é™„å½• Aï¼šHarmony æ ¼å¼ä¸å¤šæ¨¡æ€æ¶ˆæ¯åè®®æ ‡å‡† (Appendix A)</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" >
                        <a href="chapter21.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é™„å½• Bï¼šTool Schema Cookbook (å…¨åœºæ™¯å·¥å…·å®šä¹‰é€ŸæŸ¥)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter22.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é™„å½• Cï¼šTrace Schema ä¸è’¸é¦æ•°æ®æ„å»º (chapter22.md)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter23.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é™„å½• Dï¼šBenchmark æ¸…å•ä¸è‡ªå»ºè¯„æµ‹æŒ‡å— (chapter23.md)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="CLAUDE.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="btool-schema-cookbook">é™„å½• Bï¼šTool Schema Cookbook (å…¨åœºæ™¯å·¥å…·å®šä¹‰é€ŸæŸ¥)</h1>
<h2 id="1">1. å¼€ç¯‡æ®µè½ä¸è®¾è®¡å“²å­¦</h2>
<p>åœ¨ Agent å¼€å‘ä¸­ï¼Œ<strong>Tool Schema æ˜¯ä½ å†™ç»™æ¨¡å‹çš„â€œæ“ä½œæ‰‹å†Œâ€</strong>ã€‚ä¸€ä¸ªå¹³åº¸çš„ Schema ä»…ä»…å®šä¹‰äº† API æ¥å£ï¼›è€Œä¸€ä¸ªä¼˜ç§€çš„ Schema èƒ½æ˜¾è‘—é™ä½æ¨¡å‹çš„å¹»è§‰ç‡ï¼Œæé«˜å‚æ•°å¡«å……çš„å‡†ç¡®æ€§ï¼Œå¹¶éšå¼åœ°åŒ…å«â€œæ€ç»´é“¾ï¼ˆCoTï¼‰â€å¼•å¯¼ã€‚</p>
<p>æœ¬é™„å½•æ±‡é›†äº† <strong>5 å¤§ç±»ã€20+ ä¸ª</strong> ç»è¿‡ç”Ÿäº§ç¯å¢ƒéªŒè¯çš„ JSON Schema æ¨¡æ¿ã€‚å®ƒä»¬ä¸“ä¸º GPT-4oã€Claude 3.5 Sonnet ç­‰å¼ºæ¨¡å‹è®¾è®¡ï¼Œç‰¹åˆ«å¼ºåŒ–äº†å¤šæ¨¡æ€æ„ŸçŸ¥ä¸å·¥ç¨‹è½åœ°çš„ç»†èŠ‚ã€‚</p>
<p><strong>è®¾è®¡é»„é‡‘æ³•åˆ™ (Golden Rules of Schema Design)ï¼š</strong></p>
<ol>
<li><strong>Description æ˜¯æ ¸å¿ƒæç¤ºè¯</strong>ï¼šä¸è¦åªå†™ "Search Google"ï¼Œè¦å†™ "Search Google when the user asks about current events or verified facts."ã€‚</li>
<li><strong>é˜²å¾¡æ€§æšä¸¾ (Defensive Enums)</strong>ï¼šå°½å¯èƒ½å°†å­—ç¬¦ä¸²å‚æ•°é™åˆ¶ä¸º <code>enum</code>ï¼Œè¿™èƒ½ç‰©ç†é˜»æ–­æ¨¡å‹ç”Ÿæˆä¸å­˜åœ¨çš„é€‰é¡¹ã€‚</li>
<li><strong>å‰¯ä½œç”¨æ˜¾å¼åŒ–</strong>ï¼šåœ¨æè¿°ä¸­æ˜ç¡®å‘ŠçŸ¥æ¨¡å‹è¯¥å·¥å…·æ˜¯â€œåªè¯»â€çš„è¿˜æ˜¯â€œæœ‰ç ´åæ€§â€çš„ã€‚</li>
<li><strong>å¤šæ¨¡æ€åæ ‡ç³»</strong>ï¼šæ¶‰åŠè§†è§‰æ“ä½œæ—¶ï¼Œå¿…é¡»åœ¨æè¿°ä¸­ç»Ÿä¸€åæ ‡ç³»æ ‡å‡†ï¼ˆå¦‚ï¼š[0-1000] å½’ä¸€åŒ–åæ ‡ï¼‰ã€‚</li>
</ol>
<hr />
<h2 id="2">2. æ ¸å¿ƒå·¥å…·é›†è¯¦è§£</h2>
<h3 id="21-deep-web-access">2.1 æµè§ˆå™¨ä¸æ·±åº¦æ£€ç´¢ (Deep Web Access)</h3>
<p>ä¸ä»…ä»…æ˜¯ç®€å•çš„æœç´¢ï¼Œè€Œæ˜¯æ„å»ºâ€œæœç´¢-æµè§ˆ-æå–â€çš„å®Œæ•´é“¾è·¯ã€‚</p>
<h4 id="tool-01-smart-search">[Tool 01] æ™ºèƒ½æœç´¢å¼•æ“ (Smart Search)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šåŠ å…¥äº† <code>domain_filter</code> å’Œ <code>search_intent</code>ï¼Œå¼•å¯¼æ¨¡å‹åœ¨æœç´¢å‰å…ˆæ€è€ƒæœç´¢çš„ç›®çš„ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;web_search_advanced&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Performs a web search using a search engine. Optimized for retrieving factual information, technical documentation, or news.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The search query. Include specific keywords to narrow down results.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;search_intent&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;informational&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;navigational&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;troubleshooting&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;academic&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The intent behind the search to optimize ranking algorithms.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;time_range&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;any&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;past_24h&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;past_week&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;past_month&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;past_year&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Filter results by publication date.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;domain_filter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Optional list of domains to include (e.g., [&#39;github.com&#39;, &#39;stackoverflow.com&#39;]) or exclude (prefix with -).&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="tool-02-webpage-reader">[Tool 02] ç½‘é¡µå¤šæ¨¡æ€é˜…è¯»å™¨ (Webpage Reader)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šåŒºåˆ†æ–‡æœ¬æå–ä¸æˆªå›¾ã€‚å¯¹äºå¤æ‚çš„ CSS å¸ƒå±€æˆ–å›¾è¡¨ï¼Œå¼ºåˆ¶æ¨¡å‹ä½¿ç”¨æˆªå›¾æ¨¡å¼ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;read_webpage_content&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Scrapes and parses the content of a specific URL. Can return text structure or visual snapshots.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;markdown_text&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;screenshot_full&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;screenshot_viewport&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Use &#39;markdown_text&#39; for articles. Use &#39;screenshot&#39; for dashboards, charts, or complex layouts.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;wait_for_selector&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Optional CSS selector to wait for (dynamic loading) before scraping.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;mode&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="22-pdfimagevideo">2.2 å¤šæ¨¡æ€æ–‡ä»¶å¤„ç† (PDF/Image/Video)</h3>
<p>è¿™æ˜¯å¤šæ¨¡æ€ Agent çš„â€œçœ¼ç›â€ã€‚é‡ç‚¹åœ¨äº<strong>èŠ‚çœ Token</strong> å’Œ <strong>èšç„¦å…³æ³¨ç‚¹</strong>ã€‚</p>
<h4 id="tool-03-pdf-pdf-rasterizer">[Tool 03] PDF æ™ºèƒ½ç‰‡ä¸å…‰æ …åŒ– (PDF Rasterizer)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šä¸ä¸€æ¬¡æ€§ä¸¢ç»™æ¨¡å‹æ•´ä¸ª PDFã€‚å…è®¸æ¨¡å‹æŒ‰éœ€â€œç¿»é¡µâ€æˆ–â€œæ”¾å¤§â€ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;inspect_pdf_page&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Renders a specific page of a PDF document into an image for visual analysis (VLM).&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;file_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;page_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1-based page index.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;zoom_level&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Zoom factor (1.0 to 3.0). Use &gt;1.5 to read small footnotes or dense tables.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;region_of_interest&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;minItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;maxItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Optional [ymin, xmin, ymax, xmax] (0-1000) to crop specific area instead of full page.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;file_path&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;page_number&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="tool-04-video-sampler">[Tool 04] è§†é¢‘æŠ½å¸§ä¸æ‘˜è¦ (Video Sampler)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šè§†é¢‘æ˜¯å¤§å®¹é‡æ•°æ®ï¼Œå¿…é¡»é€šè¿‡é‡‡æ ·ç­–ç•¥æ¥å¤„ç†ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sample_video_frames&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Extracts frames from a video file based on a sampling strategy.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;video_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;strategy&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;uniform_interval&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;scene_change_detection&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;timestamp_list&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&#39;uniform_interval&#39;: every N seconds. &#39;scene_change&#39;: smart detection. &#39;timestamp_list&#39;: specific moments.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;interval_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Required if strategy is &#39;uniform_interval&#39;.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;timestamps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Required if strategy is &#39;timestamp_list&#39;.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;video_path&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;strategy&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="23-coding-agent">2.3 è½¯ä»¶å·¥ç¨‹ä¸ä»£ç æ‰§è¡Œ (Coding Agent)</h3>
<p>æ­¤ç±»å·¥å…·é£é™©æœ€é«˜ï¼ŒSchema å¿…é¡»åŒ…å«<strong>å®‰å…¨çº¦æŸ</strong>å’Œ<strong>ç²¾ç¡®çš„æ–‡ä»¶å®šä½</strong>ã€‚</p>
<h4 id="tool-05-file-patcher">[Tool 05] ç²¾å‡†æ–‡ä»¶ç¼–è¾‘å™¨ (File Patcher)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šé¿å…é‡å†™æ•´ä¸ªæ–‡ä»¶ï¼ˆæµªè´¹ Token ä¸”æ˜“é”™ï¼‰ã€‚é‡‡ç”¨ <code>search_block</code> + <code>replace_block</code> çš„æ¨¡å¼ï¼Œè¿™æ¯” Unified Diff å¯¹ LLM æ›´å‹å¥½ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;edit_source_code&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Edits a file by replacing a specific block of text. Locate the unique block first.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;file_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;search_block&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The exact unique text block to be replaced. Must match the file content character-by-character.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;replace_block&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The new code block to insert.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;file_path&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;search_block&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;replace_block&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="tool-06-repo-mapper">[Tool 06] ä»“åº“åœ°å›¾ç”Ÿæˆå™¨ (Repo Mapper)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šç”¨äºå‹é¡¹ç›®ï¼Œè§£å†³â€œä¸çŸ¥é“æ–‡ä»¶åœ¨å“ªâ€çš„é—®é¢˜ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_repo_map&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Generates a tree structure or dependency graph of the codebase.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;root_dir&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;depth&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Depth of the directory tree traversal.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;include_definitions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;If true, lists class and function names (signatures) alongside filenames.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;root_dir&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="24-vla-embodied-simulation">2.4 å…·èº«æ™ºèƒ½ä¸ VLA (Embodied &amp; Simulation)</h3>
<p>è¿™é‡Œçš„å…³é”®æ˜¯<strong>åŠ¨ä½œåŸè¯­ (Primitives)</strong> çš„å®šä¹‰ã€‚</p>
<h4 id="tool-07-end-effector-control">[Tool 07] æœºæ¢°è‡‚æœ«ç«¯æ§åˆ¶ (End Effector Control)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šå°†å¤æ‚çš„é€†è¿åŠ¨å­¦ï¼ˆIKï¼‰å°è£…ï¼Œåªæš´éœ²ç›®æ ‡ä½å§¿ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;move_robot_arm&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Moves the robot&#39;s end-effector to a target pose in 3D space.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;target_position&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;minItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;maxItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[x, y, z] coordinates in meters relative to robot base.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;target_orientation_rpy&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;minItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;maxItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[roll, pitch, yaw] Euler angles in degrees.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;motion_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;joint&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&#39;linear&#39; for straight line (cartesian), &#39;joint&#39; for fastest path.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;target_position&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="tool-08-visual-navigation">[Tool 08] è§†è§‰å¯¼èˆª (Visual Navigation)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šç»“åˆè¯­ä¹‰ç†è§£çš„å¯¼èˆªï¼Œè€Œéçº¯åæ ‡ã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;navigate_to_landmark&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Navigates the mobile base to a semantic landmark visible in the map or memory.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;landmark_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e.g., &#39;kitchen_counter&#39;, &#39;charging_station&#39;, &#39;red_sofa&#39;.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;proximity_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Distance in meters to consider &#39;arrived&#39;.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;landmark_name&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="25-memory-system">2.5 è®°å¿†ç®¡ç†ä¸ç³»ç»Ÿæ§åˆ¶ (Memory &amp; System)</h3>
<p>èµ‹äºˆ Agent é•¿æœŸè®°å¿†å’Œè‡ªæˆ‘åæ€çš„èƒ½åŠ›ã€‚</p>
<h4 id="tool-09-upsert-memory">[Tool 09] çŸ¥è¯†åº“å†™å…¥ (Upsert Memory)</h4>
<ul>
<li><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šå¼ºåˆ¶æ¨¡å‹å¯¹çŸ¥è¯†è¿›è¡Œåˆ†ç±»å’Œæ‰“æ ‡ï¼Œé˜²æ­¢è®°å¿†åº“å˜æˆåƒåœ¾åœºã€‚</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;save_to_long_term_memory&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Saves critical information/facts to long-term vector storage.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The fact, code snippet, or user preference to save.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Keywords for retrieval (e.g., &#39;project_A&#39;, &#39;user_preference&#39;).&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;importance&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;maximum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1=Trivial, 5=Critical/Permanent.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tags&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="3-schema">3. æœ¬ç« å°ç»“ï¼šSchema è®¾è®¡æ£€æŸ¥æ¸…å•</h2>
<p>åœ¨éƒ¨ç½²ä»»ä½•æ–°å·¥å…·å‰ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ¸…å•è¿›è¡Œ Self-Checkï¼š</p>
<ol>
<li><strong>[åŸå­æ€§]</strong>ï¼šè¿™ä¸ªå·¥å…·æ˜¯å¦åšçš„äº‹æƒ…å¤ªå¤šï¼Ÿï¼ˆå¦‚æœä¸€ä¸ªå·¥å…·æ—¢æœç´¢åˆä¸‹è½½è¿˜è§£æï¼Œè¯·æ‹†åˆ†å®ƒï¼‰ã€‚</li>
<li><strong>[é²æ£’æ€§]</strong>ï¼šå¦‚æœæ¨¡å‹ä¼ å…¥äº†ç©ºå­—ç¬¦ä¸²æˆ–è´Ÿæ•°ï¼Œåç«¯ä¼šå´©æºƒè¿˜æ˜¯è¿”å›å‹å¥½çš„ Error Messageï¼Ÿ</li>
<li><strong>[ä¸Šä¸‹æ–‡]</strong>ï¼šå·¥å…·çš„è¿”å›å€¼æ˜¯å¦åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼Ÿï¼ˆä¾‹å¦‚ï¼šæœç´¢ç»“æœä¸ä»…è¦è¿”å› URLï¼Œè¿˜è¦è¿”å› Title å’Œ Snippetï¼‰ã€‚</li>
<li><strong>[å¤šæ¨¡æ€]</strong>ï¼šå¦‚æœæ¶‰åŠå›¾ç‰‡ï¼ŒID ç³»ç»Ÿæ˜¯å¦ç»Ÿä¸€ï¼Ÿï¼ˆä¸è¦æ··ç”¨ File Path å’Œ File IDï¼‰ã€‚</li>
<li><strong>[æˆæœ¬]</strong>ï¼šé»˜è®¤å‚æ•°æ˜¯å¦è¶³å¤Ÿâ€œçœé’±â€ï¼Ÿï¼ˆä¾‹å¦‚é»˜è®¤åªè·å– Top-3 ç»“æœï¼Œè€Œé Top-20ï¼‰ã€‚</li>
</ol>
<hr />
<h2 id="4">4. ç»ƒä¹ é¢˜</h2>
<h3 id="_1">åŸºç¡€é¢˜</h3>
<ol>
<li><strong>è®¾è®¡â€œå¤©æ°”æŸ¥è¯¢â€å·¥å…·</strong>
è¦æ±‚ï¼šæ”¯æŒåŸå¸‚åæŸ¥è¯¢ï¼Œå¿…é¡»åŒ…å«æ—¥æœŸï¼ˆä»Šå¤©/æ˜å¤©/æœªæ¥ä¸€å‘¨ï¼‰ï¼Œä¸”èƒ½å¤Ÿé€‰æ‹©å•ä½ï¼ˆæ‘„æ°åº¦/åæ°åº¦ï¼‰ã€‚</li>
</ol>
<details>
<summary>ç‚¹å‡»å±•å¼€å‚è€ƒç­”æ¡ˆ</summary>
<p><strong>æç¤º</strong>ï¼šæ³¨æ„å•ä½çš„é»˜è®¤å€¼è®¾ç½®ï¼Œè¿™ç¬¦åˆç”¨æˆ·ä¹ æƒ¯ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_weather_forecast&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Retrieves weather forecast for a specific location and time range.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;City name, or &#39;City, Country&#39;.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;date_scope&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;current&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tomorrow&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;7_days&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;current&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;celsius&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;fahrenheit&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;celsius&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>
<ol start="2">
<li><strong>è®¾è®¡â€œæ—¥ç¨‹ç®¡ç†â€å·¥å…·</strong>
è¦æ±‚ï¼šåˆ›å»ºä¸€ä¸ªä¼šè®®æ—¥ç¨‹ã€‚å­—æ®µåŒ…å«ï¼šä¸»é¢˜ã€å¼€å§‹æ—¶é—´ã€æŒç»­æ—¶é•¿ã€å‚ä¸è€…åˆ—è¡¨ï¼ˆé‚®ç®±ï¼‰ã€‚</li>
</ol>
<details>
<summary>ç‚¹å‡»å±•å¼€å‚è€ƒç­”æ¡ˆ</summary>
<p><strong>æç¤º</strong>ï¼šæ—¶é—´æ ¼å¼æ˜¯åˆå­¦è€…æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ï¼Œå¿…é¡»åœ¨ description ä¸­æŒ‡å®š ISO 8601ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;schedule_meeting&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Schedules a new meeting in the calendar.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;subject&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;start_datetime&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ISO 8601 format (e.g., &#39;2023-10-27T14:00:00Z&#39;).&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;duration_minutes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;attendees&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;email&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;start_datetime&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;attendees&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>
<h3 id="_2">æŒ‘æˆ˜é¢˜ (è¿›é˜¶åœºæ™¯)</h3>
<ol start="3">
<li><strong>å¤šæ¨¡æ€ OCR åå¤„ç†å·¥å…·</strong>
èƒŒæ™¯ï¼šOCR è¯†åˆ«å‡ºçš„è¡¨æ ¼å¾€å¾€æ ¼å¼æ··ä¹±ã€‚
ä»»åŠ¡ï¼šè®¾è®¡ä¸€ä¸ªå·¥å…·ï¼Œè¾“å…¥æ˜¯ä¸€æ®µæ··ä¹±çš„ OCR æ–‡æœ¬å’ŒåŸå§‹å›¾ç‰‡çš„ Bounding Boxï¼ŒåŠŸèƒ½æ˜¯è®© Agent é‡æ„å‡º Markdown è¡¨æ ¼ã€‚</li>
</ol>
<details>
<summary>ç‚¹å‡»å±•å¼€å‚è€ƒç­”æ¡ˆ</summary>
<p><strong>æ€è·¯</strong>ï¼šè¿™ä¸ªå·¥å…·çš„è¾“å…¥æ—¢æœ‰æ–‡æœ¬åˆæœ‰è§†è§‰åæ ‡ï¼Œæ˜¯å…¸å‹çš„å¤šæ¨¡æ€èåˆå·¥å…·ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;refine_ocr_table&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Corrects and formats structureless OCR text into a clean Markdown table using visual layout information.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;raw_ocr_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The messy text output from OCR.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;bbox&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[ymin, xmin, ymax, xmax] of the table in the original image.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;expected_columns&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hint: estimated number of columns based on visual inspection.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;headers_hint&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Optional list of potential header names seen in the image.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;raw_ocr_text&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bbox&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>
<ol start="4">
<li><strong>æ•°æ®åº“å®‰å…¨æŸ¥è¯¢ (SQL Generator vs Executor)</strong>
ä»»åŠ¡ï¼šä¸ºäº†é˜²æ­¢ Agent ç›´æ¥æ‰§è¡Œå±é™© SQLï¼Œè®¾è®¡ä¸€å¥—â€œä¸¤æ­¥èµ°â€çš„å·¥å…·ç»„ã€‚
å·¥å…· Aï¼š<code>generate_sql_plan</code> (åªç”Ÿæˆï¼Œä¸æ‰§è¡Œ)
å·¥å…· Bï¼š<code>execute_approved_sql</code> (éœ€è¦ä¼ å…¥ plan_id)</li>
</ol>
<details>
<summary>ç‚¹å‡»å±•å¼€å‚è€ƒç­”æ¡ˆ</summary>
<p><strong>æ€è·¯</strong>ï¼šè¿™ç§æ¨¡å¼å«åšâ€œHuman-in-the-loopâ€æˆ–â€œSystem-Check-in-the-loopâ€ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Tool A: Generate Plan</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generate_sql_plan&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Generates a SQL query for a user request but does NOT execute it. Returns a plan_id.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;intent&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;sql_draft&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;intent&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;sql_draft&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Tool B: Execute (Requires Plan ID)</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;execute_approved_sql&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Executes a pre-generated and system-validated SQL plan.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;plan_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The ID returned by generate_sql_plan.&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;plan_id&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>
<hr />
<h2 id="5-gotchas">5. å¸¸è§é™·é˜±ä¸è°ƒè¯•æŠ€å·§ (Gotchas)</h2>
<h3 id="1_1">1. æ•°ç»„ä¸å¯¹è±¡çš„æ··æ·†</h3>
<ul>
<li><strong>é”™è¯¯</strong>ï¼š<code>items: { "type": "string" }</code> (è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„) vs <code>items: { "type": "object", ... }</code> (è¿™æ˜¯å¯¹è±¡æ•°ç»„)ã€‚</li>
<li><strong>ç°è±¡</strong>ï¼šæ¨¡å‹ç»å¸¸ç”Ÿæˆ <code>["name": "A"]</code> è¿™ç§éæ³• JSONã€‚</li>
<li><strong>Rule of Thumb</strong>ï¼šå¦‚æœåˆ—è¡¨é¡¹è¶…è¿‡ 1 ä¸ªå±æ€§ï¼Œå§‹ç»ˆä½¿ç”¨<strong>å¯¹è±¡æ•°ç»„</strong>ã€‚</li>
</ul>
<h3 id="2_1">2. é»˜è®¤å€¼çš„éšå½¢å‘</h3>
<ul>
<li><strong>é”™è¯¯</strong>ï¼šSchema é‡Œå†™äº† <code>default: 10</code>ï¼Œä½†åç«¯ä»£ç é‡Œæ²¡æœ‰å¤„ç† <code>None</code> æˆ– <code>null</code> çš„å†µã€‚</li>
<li><strong>ç°è±¡</strong>ï¼šæ¨¡å‹æœ‰æ—¶ä¼šæ˜¾å¼ä¼  <code>null</code>ï¼Œæœ‰æ—¶å®Œå…¨ä¸ä¼ å‚æ•°ã€‚</li>
<li><strong>è°ƒè¯•</strong>ï¼šåœ¨åç«¯ä»£ç ä¸­ï¼Œå§‹ç»ˆåšä¸€æ¬¡ <code>value = args.get('key') or DEFAULT_VALUE</code> çš„é˜²å¾¡æ€§ç¼–ç¨‹ï¼Œä¸è¦å®Œå…¨ä¾èµ– Schema çš„ default æè¿°ï¼ˆå› ä¸ºæœ‰äº› LLM å¯èƒ½ä¼šå¿½ç•¥å®ƒï¼‰ã€‚</li>
</ul>
<h3 id="3">3. å¤šæ¨¡æ€çš„â€œåˆ†è¾¨ç‡â€é—®é¢˜</h3>
<ul>
<li><strong>ç°è±¡</strong>ï¼šAgent çœ‹ç€ 1080p çš„å¤§å›¾ï¼Œå´çœ‹ä¸æ¸…é‡Œé¢çš„å°å­—ã€‚</li>
<li><strong>åŸå› </strong>ï¼šè§†è§‰æ¨¡å‹é€šå¸¸ä¼šå°†å›¾ç‰‡ Resize åˆ°å›ºå®šå¤§å°ï¼ˆå¦‚ 224x224 æˆ– 1024x1024ï¼‰ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šå¿…é¡»æä¾› <code>crop</code> å·¥å…·ã€‚å¦‚æœ Agent æŠ±æ€¨â€œçœ‹ä¸æ¸…â€ï¼Œæç¤ºå®ƒä½¿ç”¨ crop å·¥å…·æˆªå–å±€éƒ¨æ”¾å¤§ã€‚</li>
</ul>
<h3 id="4-json-schema">4. JSON Schema å¤æ‚åº¦ä¸Šé™</h3>
<ul>
<li><strong>ç°è±¡</strong>ï¼šSchema å®šä¹‰éå¸¸å®Œç¾ï¼ŒåŒ…å«äº† <code>oneOf</code>ã€<code>anyOf</code>ã€æ¡ä»¶ä¾èµ–é€»è¾‘ã€‚</li>
<li><strong>åæœ</strong>ï¼šæ¨¡å‹ï¼ˆå°¤å…¶æ˜¯ 7B/13B çº§åˆ«çš„å°æ¨¡å‹ï¼‰å®Œå…¨æ— æ³•ç†è§£å¤æ‚çš„ JSON Schema é€»è¾‘ï¼Œå¯¼è‡´è°ƒç”¨å¤±è´¥ã€‚</li>
<li><strong>Rule of Thumb</strong>ï¼š<strong>Keep It Simple (K.I.S.S)</strong>ã€‚å¦‚æœå‚æ•°é€»è¾‘å¤ªå¤æ‚ï¼Œä¸å¦‚æ‹†æˆä¸¤ä¸ªä¸åŒçš„å·¥å…·ã€‚</li>
</ul>
            </article>
            
            <nav class="page-nav"><a href="chapter20.html" class="nav-link prev">â† é™„å½• Aï¼šHarmony æ ¼å¼ä¸å¤šæ¨¡æ€æ¶ˆæ¯åè®®æ ‡å‡† (Appendix A)</a><a href="chapter22.html" class="nav-link next">é™„å½• Cï¼šTrace Schema ä¸è’¸é¦æ•°æ®æ„å»º (chapter22.md) â†’</a></nav>
        </main>
    </div>
</body>
</html>